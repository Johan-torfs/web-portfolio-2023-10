const possibleBorderPositionsDefault = {
    xs: {
        tl: {
            sm: 'rounded-tl-sm', 
            md: 'rounded-tl-md',
            lg: 'rounded-tl-lg',
            xl: 'rounded-tl-xl',
            "2xl": 'rounded-tl-2xl',
            "3xl": 'rounded-tl-3xl',
            full: 'rounded-tl-full',
            none: 'rounded-tl-none',
        },
        tr: {
            sm: 'rounded-tr-sm', 
            md: 'rounded-tr-md',
            lg: 'rounded-tr-lg',
            xl: 'rounded-tr-xl',
            "2xl": 'rounded-tr-2xl',
            "3xl": 'rounded-tr-3xl',
            full: 'rounded-tr-full',
            none: 'rounded-tr-none',
        },
        bl: {
            sm: 'rounded-bl-sm', 
            md: 'rounded-bl-md',
            lg: 'rounded-bl-lg',
            xl: 'rounded-bl-xl',
            "2xl": 'rounded-bl-2xl',
            "3xl": 'rounded-bl-3xl',
            full: 'rounded-bl-full',
            none: 'rounded-bl-none',
        },
        br: {
            sm: 'rounded-br-sm', 
            md: 'rounded-br-md',
            lg: 'rounded-br-lg',
            xl: 'rounded-br-xl',
            "2xl": 'rounded-br-2xl',
            "3xl": 'rounded-br-3xl',
            full: 'rounded-br-full',
            none: 'rounded-br-none',
        },
    },
    sm: {
        tl: {
            sm: 'sm:rounded-tl-sm', 
            md: 'sm:rounded-tl-md',
            lg: 'sm:rounded-tl-lg',
            xl: 'sm:rounded-tl-xl',
            "2xl": 'sm:rounded-tl-2xl',
            "3xl": 'sm:rounded-tl-3xl',
            full: 'sm:rounded-tl-full',
            none: 'sm:rounded-tl-none',
        },
        tr: {
            sm: 'sm:rounded-tr-sm', 
            md: 'sm:rounded-tr-md',
            lg: 'sm:rounded-tr-lg',
            xl: 'sm:rounded-tr-xl',
            "2xl": 'sm:rounded-tr-2xl',
            "3xl": 'sm:rounded-tr-3xl',
            full: 'sm:rounded-tr-full',
            none: 'sm:rounded-tr-none',
        },
        bl: {
            sm: 'sm:rounded-bl-sm', 
            md: 'sm:rounded-bl-md',
            lg: 'sm:rounded-bl-lg',
            xl: 'sm:rounded-bl-xl',
            "2xl": 'sm:rounded-bl-2xl',
            "3xl": 'sm:rounded-bl-3xl',
            full: 'sm:rounded-bl-full',
            none: 'sm:rounded-bl-none',
        },
        br: {
            sm: 'sm:rounded-br-sm', 
            md: 'sm:rounded-br-md',
            lg: 'sm:rounded-br-lg',
            xl: 'sm:rounded-br-xl',
            "2xl": 'sm:rounded-br-2xl',
            "3xl": 'sm:rounded-br-3xl',
            full: 'sm:rounded-br-full',
            none: 'sm:rounded-br-none',
        },
    },
    md: {
        tl: {
            sm: 'md:rounded-tl-sm', 
            md: 'md:rounded-tl-md',
            lg: 'md:rounded-tl-lg',
            xl: 'md:rounded-tl-xl',
            "2xl": 'md:rounded-tl-2xl',
            "3xl": 'md:rounded-tl-3xl',
            full: 'md:rounded-tl-full',
            none: 'md:rounded-tl-none',
        },
        tr: {
            sm: 'md:rounded-tr-sm', 
            md: 'md:rounded-tr-md',
            lg: 'md:rounded-tr-lg',
            xl: 'md:rounded-tr-xl',
            "2xl": 'md:rounded-tr-2xl',
            "3xl": 'md:rounded-tr-3xl',
            full: 'md:rounded-tr-full',
            none: 'md:rounded-tr-none',
        },
        bl: {
            sm: 'md:rounded-bl-sm', 
            md: 'md:rounded-bl-md',
            lg: 'md:rounded-bl-lg',
            xl: 'md:rounded-bl-xl',
            "2xl": 'md:rounded-bl-2xl',
            "3xl": 'md:rounded-bl-3xl',
            full: 'md:rounded-bl-full',
            none: 'md:rounded-bl-none',
        },
        br: {
            sm: 'md:rounded-br-sm', 
            md: 'md:rounded-br-md',
            lg: 'md:rounded-br-lg',
            xl: 'md:rounded-br-xl',
            "2xl": 'md:rounded-br-2xl',
            "3xl": 'md:rounded-br-3xl',
            full: 'md:rounded-br-full',
            none: 'md:rounded-br-none',
        },
    },
    lg: {
        tl: {
            sm: 'lg:rounded-tl-sm', 
            md: 'lg:rounded-tl-md',
            lg: 'lg:rounded-tl-lg',
            xl: 'lg:rounded-tl-xl',
            "2xl": 'lg:rounded-tl-2xl',
            "3xl": 'lg:rounded-tl-3xl',
            full: 'lg:rounded-tl-full',
            none: 'lg:rounded-tl-none',
        },
        tr: {
            sm: 'lg:rounded-tr-sm', 
            md: 'lg:rounded-tr-md',
            lg: 'lg:rounded-tr-lg',
            xl: 'lg:rounded-tr-xl',
            "2xl": 'lg:rounded-tr-2xl',
            "3xl": 'lg:rounded-tr-3xl',
            full: 'lg:rounded-tr-full',
            none: 'lg:rounded-tr-none',
        },
        bl: {
            sm: 'lg:rounded-bl-sm', 
            md: 'lg:rounded-bl-md',
            lg: 'lg:rounded-bl-lg',
            xl: 'lg:rounded-bl-xl',
            "2xl": 'lg:rounded-bl-2xl',
            "3xl": 'lg:rounded-bl-3xl',
            full: 'lg:rounded-bl-full',
            none: 'lg:rounded-bl-none',
        },
        br: {
            sm: 'lg:rounded-br-sm', 
            md: 'lg:rounded-br-md',
            lg: 'lg:rounded-br-lg',
            xl: 'lg:rounded-br-xl',
            "2xl": 'lg:rounded-br-2xl',
            "3xl": 'lg:rounded-br-3xl',
            full: 'lg:rounded-br-full',
            none: 'lg:rounded-br-none',
        },
    },
    xl: {
        tl: {
            sm: 'xl:rounded-tl-sm', 
            md: 'xl:rounded-tl-md',
            lg: 'xl:rounded-tl-lg',
            xl: 'xl:rounded-tl-xl',
            "2xl": 'xl:rounded-tl-2xl',
            "3xl": 'xl:rounded-tl-3xl',
            full: 'xl:rounded-tl-full',
            none: 'xl:rounded-tl-none',
        },
        tr: {
            sm: 'xl:rounded-tr-sm', 
            md: 'xl:rounded-tr-md',
            lg: 'xl:rounded-tr-lg',
            xl: 'xl:rounded-tr-xl',
            "2xl": 'xl:rounded-tr-2xl',
            "3xl": 'xl:rounded-tr-3xl',
            full: 'xl:rounded-tr-full',
            none: 'xl:rounded-tr-none',
        },
        bl: {
            sm: 'xl:rounded-bl-sm', 
            md: 'xl:rounded-bl-md',
            lg: 'xl:rounded-bl-lg',
            xl: 'xl:rounded-bl-xl',
            "2xl": 'xl:rounded-bl-2xl',
            "3xl": 'xl:rounded-bl-3xl',
            full: 'xl:rounded-bl-full',
            none: 'xl:rounded-bl-none',
        },
        br: {
            sm: 'xl:rounded-br-sm', 
            md: 'xl:rounded-br-md',
            lg: 'xl:rounded-br-lg',
            xl: 'xl:rounded-br-xl',
            "2xl": 'xl:rounded-br-2xl',
            "3xl": 'xl:rounded-br-3xl',
            full: 'xl:rounded-br-full',
            none: 'xl:rounded-br-none',
        },
    },
}

const mapBorderPositions = {
    tl: 1 << 0,
    tr: 1 << 1,
    bl: 1 << 2,
    br: 1 << 3,
}

const screenSizes = ["xs", "sm", "md", "lg", "xl"];
const positions = ["tl", "tr", "bl", "br"];

const sizeNameDefault = 'border_radius_size';
const positionNameDefault = 'border_radius_position';

var positionState = false;
function togglePositionState(screen, key, size) {
    positionState = !positionState;
    return possibleBorderPositionsDefault[screen][key][positionState ? size : 'none'];
}

export function getBorderRadiusClasses(blok, {sizeName = sizeNameDefault, positionName = positionNameDefault} = {}) {
    if (!blok[positionName]) return '';
    if (!blok[sizeName]) blok[sizeName] = 'md';

    let className = `
        ${
            positions.map(key => {
                positionState = false;
                return screenSizes.map(screen => (
                    (!(blok[positionName][screen] & mapBorderPositions[key]) != !positionState) ? togglePositionState(screen, key, blok[sizeName]) : ''
                )).join(' ')
            }).join(' ')
        }
    `.replace(/\s+/g, ' ').trim();

    return className;
}